#include "instruction.h"
#include "registers.h"

get_byte(reg_pc)

// Split the instruction into its components (http://www.z80.info/decoding.htm)
{Ans, prefix_bkp, int(Ans / 64), remainder(int(Ans / 8), 8), remainder(Ans, 8)}
augment(Ans,{int(Ans(4) / 2), remainder(Ans(4), 2)})→inst_part_list
no_prefix→prefix_bkp
If in(inst_prefix,({no_prefix,prefix_ix,prefix_iy})):Then
#include "instructions/no_prefix.pbasic"
End

wrap24(reg_pc + 1)→reg_pc
